<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Market Map - Visual Landscape</title>
    <style>
        :root {
            --bg-primary: #0d1a2d;
            --bg-secondary: #1a2b4a;
            --bg-card: #152238;
            --accent-gold: #d4a84b;
            --accent-cyan: #00bcd4;
            --text-primary: #ffffff;
            --text-secondary: #8899aa;
            --border-color: #2a3f5f;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-primary));
            padding: 20px;
            border-bottom: 2px solid var(--accent-gold);
            text-align: center;
        }
        .header h1 {
            color: var(--accent-gold);
            font-size: 1.8em;
            margin-bottom: 5px;
        }
        .header p {
            color: var(--accent-cyan);
            font-size: 0.9em;
        }
        .nav-links {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .nav-link {
            padding: 8px 20px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            color: var(--text-primary);
            text-decoration: none;
            font-size: 0.85em;
            transition: all 0.2s;
        }
        .nav-link:hover {
            border-color: var(--accent-cyan);
            background: var(--bg-secondary);
        }
        .nav-link.active {
            background: var(--accent-gold);
            color: var(--bg-primary);
            border-color: var(--accent-gold);
        }

        /* Controls */
        .controls {
            padding: 15px 20px;
            background: var(--bg-secondary);
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid var(--border-color);
        }
        .control-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .control-label {
            color: var(--text-secondary);
            font-size: 0.85em;
        }
        .control-select {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 0.85em;
        }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            padding: 15px;
            background: rgba(0, 188, 212, 0.1);
            flex-wrap: wrap;
        }
        .stat-item {
            text-align: center;
        }
        .stat-value {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--accent-gold);
        }
        .stat-label {
            font-size: 0.75em;
            color: var(--text-secondary);
        }

        /* Map Container */
        .map-container {
            padding: 20px;
            min-height: calc(100vh - 250px);
        }

        /* Category Sections */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            max-width: 1600px;
            margin: 0 auto;
        }

        .category-box {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        .category-box:hover {
            border-color: var(--accent-cyan);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        .category-title {
            font-size: 1.1em;
            color: var(--accent-gold);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .category-stats {
            text-align: right;
        }
        .category-count {
            font-size: 1.2em;
            font-weight: 700;
            color: var(--accent-cyan);
        }
        .category-funding {
            font-size: 0.75em;
            color: var(--text-secondary);
        }

        /* Bubble Container */
        .bubble-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: flex-end;
            min-height: 150px;
            padding: 10px 0;
        }

        /* Company Bubbles */
        .bubble {
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            font-weight: 600;
            text-align: center;
            line-height: 1.2;
            font-size: 0.65em;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }
        .bubble:hover {
            transform: scale(1.15);
            z-index: 10;
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
        }
        .bubble.unicorn {
            border: 3px solid #f1c40f;
        }
        .bubble.ma-target {
            border: 3px solid #e74c3c;
        }

        /* Bubble Colors by Category */
        .bubble.foundation-models { background: linear-gradient(135deg, #9b59b6, #8e44ad); }
        .bubble.developer-tools { background: linear-gradient(135deg, #3498db, #2980b9); }
        .bubble.enterprise-ai { background: linear-gradient(135deg, #2ecc71, #27ae60); }
        .bubble.gtm-ai { background: linear-gradient(135deg, #e67e22, #d35400); }
        .bubble.fintech-legal { background: linear-gradient(135deg, #1abc9c, #16a085); }
        .bubble.healthtech { background: linear-gradient(135deg, #e74c3c, #c0392b); }
        .bubble.industrial-ai { background: linear-gradient(135deg, #34495e, #2c3e50); }
        .bubble.consumer-ai { background: linear-gradient(135deg, #f39c12, #f1c40f); }

        /* Tooltip */
        .tooltip {
            position: fixed;
            background: var(--bg-secondary);
            border: 2px solid var(--accent-gold);
            border-radius: 10px;
            padding: 15px;
            max-width: 300px;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
        .tooltip.active {
            opacity: 1;
        }
        .tooltip-name {
            font-size: 1.1em;
            font-weight: 700;
            color: var(--accent-gold);
            margin-bottom: 5px;
        }
        .tooltip-product {
            color: var(--accent-cyan);
            font-size: 0.85em;
            margin-bottom: 10px;
        }
        .tooltip-row {
            display: flex;
            justify-content: space-between;
            font-size: 0.85em;
            margin-bottom: 5px;
        }
        .tooltip-label {
            color: var(--text-secondary);
        }
        .tooltip-value {
            color: var(--text-primary);
            font-weight: 500;
        }
        .tooltip-tags {
            margin-top: 10px;
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }
        .tooltip-tag {
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: 600;
        }
        .tooltip-tag.unicorn { background: rgba(155, 89, 182, 0.3); color: #9b59b6; }
        .tooltip-tag.ma { background: rgba(231, 76, 60, 0.3); color: #e74c3c; }

        /* Legend */
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 15px;
            flex-wrap: wrap;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.8em;
            color: var(--text-secondary);
        }
        .legend-bubble {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
        .legend-bubble.small { width: 15px; height: 15px; }
        .legend-bubble.medium { width: 25px; height: 25px; }
        .legend-bubble.large { width: 35px; height: 35px; }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.85);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .modal-overlay.active {
            display: flex;
        }
        .modal-content {
            background: var(--bg-secondary);
            border: 2px solid var(--accent-gold);
            border-radius: 15px;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            padding: 25px;
        }
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 36px;
            height: 36px;
            background: var(--danger);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.4em;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        .modal-close:hover {
            background: #c0392b;
            transform: scale(1.1);
        }
        .modal-title {
            color: var(--accent-gold);
            font-size: 1.4em;
            margin-bottom: 5px;
            padding-right: 40px;
        }
        .modal-subtitle {
            color: var(--accent-cyan);
            font-size: 0.9em;
            margin-bottom: 20px;
        }
        .modal-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .modal-stat {
            background: var(--bg-card);
            padding: 12px;
            border-radius: 8px;
        }
        .modal-stat-label {
            font-size: 0.75em;
            color: var(--text-secondary);
            text-transform: uppercase;
        }
        .modal-stat-value {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-primary);
        }
        .modal-section {
            margin-bottom: 15px;
        }
        .modal-section-title {
            font-size: 0.85em;
            color: var(--accent-cyan);
            text-transform: uppercase;
            margin-bottom: 8px;
        }
        .modal-section-text {
            font-size: 0.9em;
            color: var(--text-secondary);
            line-height: 1.6;
        }
        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .modal-btn.primary {
            background: var(--accent-gold);
            color: var(--bg-primary);
        }
        .modal-btn.secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        .modal-btn:hover {
            transform: scale(1.02);
        }

        @media (max-width: 600px) {
            .category-grid {
                grid-template-columns: 1fr;
            }
            .stats-bar {
                gap: 15px;
            }
            .controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>AI Market Map</h1>
        <p>Visual Landscape of 800+ Private AI Companies</p>
        <div class="nav-links">
            <a href="index.html" class="nav-link">Directory</a>
            <a href="compare.html" class="nav-link">Compare</a>
            <a href="market-map.html" class="nav-link active">Market Map</a>
        </div>
    </header>

    <div class="controls">
        <div class="control-group">
            <span class="control-label">Size by:</span>
            <select class="control-select" id="sizeBy">
                <option value="funding">Funding</option>
                <option value="employees">Employees</option>
                <option value="rating">Rating</option>
            </select>
        </div>
        <div class="control-group">
            <span class="control-label">Filter:</span>
            <select class="control-select" id="filterBy">
                <option value="all">All Companies</option>
                <option value="unicorn">Unicorns Only</option>
                <option value="ma-target">M&A Targets</option>
                <option value="sf">SF Bay Area</option>
                <option value="boston">Boston</option>
                <option value="nyc">NYC</option>
            </select>
        </div>
        <div class="control-group">
            <span class="control-label">Min Funding:</span>
            <select class="control-select" id="minFunding">
                <option value="0">Any</option>
                <option value="10000000">$10M+</option>
                <option value="50000000">$50M+</option>
                <option value="100000000">$100M+</option>
                <option value="500000000">$500M+</option>
                <option value="1000000000">$1B+</option>
            </select>
        </div>
    </div>

    <div class="stats-bar">
        <div class="stat-item">
            <div class="stat-value" id="totalCompanies">0</div>
            <div class="stat-label">Companies</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="totalFunding">$0B</div>
            <div class="stat-label">Total Funding</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="unicornCount">0</div>
            <div class="stat-label">Unicorns</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="categoryCount">0</div>
            <div class="stat-label">Categories</div>
        </div>
    </div>

    <div class="map-container">
        <div class="category-grid" id="categoryGrid">
            <!-- Generated by JS -->
        </div>
    </div>

    <div class="legend">
        <div class="legend-item">
            <div class="legend-bubble small" style="background: var(--accent-cyan);"></div>
            <span>&lt;$50M</span>
        </div>
        <div class="legend-item">
            <div class="legend-bubble medium" style="background: var(--accent-cyan);"></div>
            <span>$50M-$500M</span>
        </div>
        <div class="legend-item">
            <div class="legend-bubble large" style="background: var(--accent-cyan);"></div>
            <span>&gt;$500M</span>
        </div>
        <div class="legend-item">
            <div class="legend-bubble" style="background: var(--accent-cyan); border: 3px solid #f1c40f;"></div>
            <span>Unicorn</span>
        </div>
        <div class="legend-item">
            <div class="legend-bubble" style="background: var(--accent-cyan); border: 3px solid #e74c3c;"></div>
            <span>M&A Target</span>
        </div>
    </div>

    <!-- Tooltip -->
    <div class="tooltip" id="tooltip"></div>

    <!-- Modal -->
    <div class="modal-overlay" id="companyModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <div id="modalContent"></div>
        </div>
    </div>

<script>
// Company Data (subset for market map)
const companies = [
    {id:1,name:"OpenAI",product:"ChatGPT / GPT-4",category:"foundation-models",founded:2015,ceo:"Sam Altman",funding:"$11B+",fundingValue:11000000000,rating:5,hq:"San Francisco, CA",employees:"2,000-3,000",secretSauce:"Category creator + consumer habit + enterprise API dominance",maInsight:"Unlikely M&A target due to size and Microsoft partnership."},
    {id:2,name:"Anthropic",product:"Claude",category:"foundation-models",founded:2021,ceo:"Dario Amodei",funding:"$7.3B+",fundingValue:7300000000,rating:5,hq:"San Francisco, CA",employees:"800-1,200",secretSauce:"Constitutional AI + safety-first positioning",maInsight:"Amazon $4B investment makes acquisition complex."},
    {id:3,name:"Mistral AI",product:"Mistral Models",category:"foundation-models",founded:2023,ceo:"Arthur Mensch",funding:"$1B+",fundingValue:1000000000,rating:4,hq:"Paris, France",employees:"50-100",secretSauce:"European AI champion + efficient open models",maInsight:"European sovereign AI play."},
    {id:4,name:"Cohere",product:"Command, Embed",category:"foundation-models",founded:2019,ceo:"Aidan Gomez",funding:"$970M+",fundingValue:970000000,rating:4,hq:"Toronto, Canada",employees:"300-500",secretSauce:"Enterprise RAG focus + multilingual",maInsight:"Prime acquisition target for Oracle, SAP, Salesforce."},
    {id:5,name:"Databricks",product:"DBRX, Mosaic",category:"foundation-models",founded:2013,ceo:"Ali Ghodsi",funding:"$4.1B",fundingValue:4100000000,rating:4,hq:"San Francisco, CA",employees:"6,000-7,000",secretSauce:"Data lakehouse + enterprise data",maInsight:"IPO candidate. Too large for most acquirers."},
    {id:6,name:"xAI",product:"Grok",category:"foundation-models",founded:2023,ceo:"Elon Musk",funding:"$6B+",fundingValue:6000000000,rating:4,hq:"Palo Alto, CA",employees:"100-200",secretSauce:"X/Twitter data access",maInsight:"Unlikely target due to Musk ownership."},
    {id:7,name:"Groq",product:"LPU Inference",category:"foundation-models",founded:2016,ceo:"Jonathan Ross",funding:"$640M",fundingValue:640000000,rating:4,hq:"Mountain View, CA",employees:"200-300",secretSauce:"LPU chips = fastest inference",maInsight:"Strategic silicon asset for acquirers."},
    {id:8,name:"Cerebras",product:"Wafer-Scale AI",category:"foundation-models",founded:2016,ceo:"Andrew Feldman",funding:"$720M",fundingValue:720000000,rating:4,hq:"Sunnyvale, CA",employees:"400-500",secretSauce:"Wafer-scale chips",maInsight:"Strategic silicon acquisition target."},
    {id:16,name:"LangChain",product:"LangChain Framework",category:"developer-tools",founded:2022,ceo:"Harrison Chase",funding:"$35M",fundingValue:35000000,rating:5,hq:"San Francisco, CA",employees:"50-80",secretSauce:"LLM app framework standard",maInsight:"Strategic developer tool for cloud providers."},
    {id:17,name:"LlamaIndex",product:"LlamaIndex",category:"developer-tools",founded:2022,ceo:"Jerry Liu",funding:"$19M",fundingValue:19000000,rating:4,hq:"San Francisco, CA",employees:"30-50",secretSauce:"RAG framework leader",maInsight:"RAG infrastructure acquisition target."},
    {id:19,name:"Pinecone",product:"Vector Database",category:"developer-tools",founded:2019,ceo:"Edo Liberty",funding:"$138M",fundingValue:138000000,rating:4,hq:"San Francisco, CA",employees:"150-200",secretSauce:"Vector database leader",maInsight:"Core AI infrastructure target."},
    {id:20,name:"Weaviate",product:"Weaviate",category:"developer-tools",founded:2019,ceo:"Bob van Luijt",funding:"$68M",fundingValue:68000000,rating:4,hq:"Amsterdam, Netherlands",employees:"80-120",secretSauce:"Open-source vector DB",maInsight:"Attractive to cloud providers."},
    {id:37,name:"Cursor",product:"Cursor IDE",category:"developer-tools",founded:2022,ceo:"Michael Truell",funding:"$60M",fundingValue:60000000,rating:5,hq:"San Francisco, CA",employees:"30-50",secretSauce:"AI-first IDE",maInsight:"Hot acquisition target for Microsoft, JetBrains."},
    {id:38,name:"Replit",product:"Replit",category:"developer-tools",founded:2016,ceo:"Amjad Masad",funding:"$222M",fundingValue:222000000,rating:4,hq:"San Francisco, CA",employees:"100-150",secretSauce:"Browser IDE + Ghostwriter AI",maInsight:"Attractive to cloud or EdTech acquirers."},
    {id:39,name:"Codeium",product:"Codeium",category:"developer-tools",founded:2022,ceo:"Varun Mohan",funding:"$150M",fundingValue:150000000,rating:4,hq:"Mountain View, CA",employees:"60-80",secretSauce:"Free tier + enterprise security",maInsight:"Enterprise revenue attractive to acquirers."},
    {id:43,name:"Cognition",product:"Devin",category:"developer-tools",founded:2023,ceo:"Scott Wu",funding:"$175M",fundingValue:175000000,rating:5,hq:"San Francisco, CA",employees:"20-30",secretSauce:"Fully autonomous AI software engineer",maInsight:"Highly valuable autonomous coding tech."},
    {id:81,name:"Glean",product:"Enterprise Search",category:"enterprise-ai",founded:2019,ceo:"Arvind Jain",funding:"$360M",fundingValue:360000000,rating:5,hq:"Palo Alto, CA",employees:"400-500",secretSauce:"Enterprise AI search",maInsight:"Google or Microsoft could acquire."},
    {id:82,name:"Gong",product:"Revenue Intelligence",category:"gtm-ai",founded:2015,ceo:"Amit Bendov",funding:"$584M",fundingValue:584000000,rating:5,hq:"San Francisco, CA",employees:"1,200-1,500",secretSauce:"Conversation intelligence",maInsight:"Salesforce or Oracle potential acquirer."},
    {id:84,name:"Moveworks",product:"Moveworks",category:"enterprise-ai",founded:2016,ceo:"Bhavin Shah",funding:"$315M",fundingValue:315000000,rating:4,hq:"Mountain View, CA",employees:"500-700",secretSauce:"Enterprise AI copilot",maInsight:"ServiceNow, Microsoft potential acquirers."},
    {id:87,name:"Notion AI",product:"Notion AI",category:"enterprise-ai",founded:2016,ceo:"Ivan Zhao",funding:"$343M",fundingValue:343000000,rating:4,hq:"San Francisco, CA",employees:"400-500",secretSauce:"All-in-one workspace + AI",maInsight:"Microsoft or Atlassian potential interest."},
    {id:88,name:"Grammarly",product:"Grammarly",category:"enterprise-ai",founded:2009,ceo:"Rahul Roy-Chowdhury",funding:"$400M",fundingValue:400000000,rating:4,hq:"San Francisco, CA",employees:"900-1,100",secretSauce:"Writing assistant + 30M users",maInsight:"Strategic for Microsoft, Google."},
    {id:95,name:"6sense",product:"ABM Platform",category:"gtm-ai",founded:2013,ceo:"Jason Zintak",funding:"$426M",fundingValue:426000000,rating:5,hq:"San Francisco, CA",employees:"1,000-1,200",secretSauce:"Intent data + ABM platform",maInsight:"Adobe or Salesforce potential acquirer."},
    {id:101,name:"Eightfold AI",product:"Talent Intelligence",category:"enterprise-ai",founded:2016,ceo:"Ashutosh Garg",funding:"$396M",fundingValue:396000000,rating:4,hq:"Santa Clara, CA",employees:"700-900",secretSauce:"AI talent intelligence",maInsight:"Workday, Oracle, SAP potential acquirer."},
    {id:111,name:"Ada",product:"AI Customer Service",category:"enterprise-ai",founded:2016,ceo:"Mike Murchison",funding:"$190M",fundingValue:190000000,rating:4,hq:"Toronto, Canada",employees:"400-500",secretSauce:"AI-first customer service",maInsight:"Zendesk, Salesforce potential."},
    {id:119,name:"Harvey",product:"Legal AI",category:"fintech-legal",founded:2022,ceo:"Winston Weinberg",funding:"$106M",fundingValue:106000000,rating:5,hq:"San Francisco, CA",employees:"80-120",secretSauce:"Legal AI + elite law firms",maInsight:"Thomson Reuters, LexisNexis potential."},
    {id:121,name:"Ironclad",product:"Contract Lifecycle",category:"fintech-legal",founded:2014,ceo:"Jason Boehmig",funding:"$333M",fundingValue:333000000,rating:4,hq:"San Francisco, CA",employees:"500-600",secretSauce:"Contract lifecycle management",maInsight:"DocuSign, Salesforce potential."},
    {id:126,name:"Ramp",product:"Corporate Spend",category:"fintech-legal",founded:2019,ceo:"Eric Glyman",funding:"$970M",fundingValue:970000000,rating:5,hq:"New York, NY",employees:"700-900",secretSauce:"Spend management + AI savings",maInsight:"Could IPO or be acquired by major bank."},
    {id:250,name:"Tempus",product:"Tempus AI",category:"healthtech",founded:2015,ceo:"Eric Lefkofsky",funding:"$1.3B",fundingValue:1300000000,rating:5,hq:"Chicago, IL",employees:"2,500-3,000",secretSauce:"Precision medicine AI",maInsight:"IPO candidate."},
    {id:251,name:"Viz.ai",product:"Viz Platform",category:"healthtech",founded:2016,ceo:"Chris Mansi",funding:"$252M",fundingValue:252000000,rating:4,hq:"San Francisco, CA",employees:"300-400",secretSauce:"AI stroke detection",maInsight:"Strategic for hospital systems."},
    {id:252,name:"PathAI",product:"PathAI",category:"healthtech",founded:2016,ceo:"Andy Beck",funding:"$255M",fundingValue:255000000,rating:4,hq:"Boston, MA",employees:"300-400",secretSauce:"Pathology AI",maInsight:"Pharma or diagnostics company target."},
    {id:350,name:"Scale AI",product:"Scale",category:"industrial-ai",founded:2016,ceo:"Alexandr Wang",funding:"$602M",fundingValue:602000000,rating:5,hq:"San Francisco, CA",employees:"600-800",secretSauce:"Data labeling + defense contracts",maInsight:"Strategic acquisition target."},
    {id:351,name:"Labelbox",product:"Labelbox",category:"industrial-ai",founded:2018,ceo:"Manu Sharma",funding:"$188M",fundingValue:188000000,rating:4,hq:"San Francisco, CA",employees:"200-300",secretSauce:"Data labeling + MLOps",maInsight:"Attractive to cloud or AI companies."},
    {id:450,name:"Figure",product:"Figure 01",category:"industrial-ai",founded:2022,ceo:"Brett Adcock",funding:"$675M",fundingValue:675000000,rating:5,hq:"Sunnyvale, CA",employees:"150-200",secretSauce:"Humanoid robot + BMW partnership",maInsight:"Strategic asset for manufacturing."},
    {id:451,name:"1X Technologies",product:"NEO",category:"industrial-ai",founded:2014,ceo:"Bernt Bornich",funding:"$125M",fundingValue:125000000,rating:4,hq:"Moss, Norway",employees:"80-100",secretSauce:"Humanoid robots + OpenAI",maInsight:"European robotics asset."},
    {id:500,name:"Character.ai",product:"Character",category:"consumer-ai",founded:2022,ceo:"Noam Shazeer",funding:"$150M",fundingValue:150000000,rating:4,hq:"Palo Alto, CA",employees:"100-150",secretSauce:"AI character creation",maInsight:"Entertainment or social media target."},
    {id:502,name:"Perplexity",product:"Perplexity",category:"consumer-ai",founded:2022,ceo:"Aravind Srinivas",funding:"$165M",fundingValue:165000000,rating:5,hq:"San Francisco, CA",employees:"50-80",secretSauce:"AI answer engine",maInsight:"Search disruption play."},
    {id:701,name:"Runway",product:"Runway ML",category:"consumer-ai",founded:2018,ceo:"Cristobal Valenzuela",funding:"$237M",fundingValue:237000000,rating:5,hq:"New York, NY",employees:"100-150",secretSauce:"AI video generation",maInsight:"Adobe or entertainment company target."},
    {id:702,name:"Pika",product:"Pika",category:"consumer-ai",founded:2023,ceo:"Demi Guo",funding:"$135M",fundingValue:135000000,rating:4,hq:"Palo Alto, CA",employees:"20-30",secretSauce:"AI video generation",maInsight:"TikTok, Meta potential acquirers."},
    {id:703,name:"ElevenLabs",product:"ElevenLabs",category:"consumer-ai",founded:2022,ceo:"Mati Staniszewski",funding:"$101M",fundingValue:101000000,rating:5,hq:"New York, NY",employees:"50-80",secretSauce:"Voice AI + speech synthesis",maInsight:"Spotify, Adobe potential."},
    {id:705,name:"Midjourney",product:"Midjourney",category:"consumer-ai",founded:2022,ceo:"David Holz",funding:"$0 (Self-funded)",fundingValue:10000000,rating:5,hq:"San Francisco, CA",employees:"50-60",secretSauce:"Image generation + artistic style",maInsight:"Would require significant premium."},
    {id:706,name:"Suno",product:"Suno",category:"consumer-ai",founded:2023,ceo:"Mikey Shulman",funding:"$125M",fundingValue:125000000,rating:4,hq:"Cambridge, MA",employees:"30-40",secretSauce:"AI music generation",maInsight:"Music label or streaming target."},
    {id:151,name:"Lavender",product:"Lavender",category:"gtm-ai",founded:2020,ceo:"Will Allred",funding:"$13M",fundingValue:13000000,rating:4,hq:"Boston, MA",employees:"30-50",secretSauce:"Email AI coaching",maInsight:"CRM or sales platform acquisition."}
];

const categoryNames = {
    'foundation-models': { name: 'Foundation Models', emoji: 'ðŸ§ ' },
    'developer-tools': { name: 'Developer Tools', emoji: 'ðŸ› ï¸' },
    'enterprise-ai': { name: 'Enterprise AI', emoji: 'ðŸ¢' },
    'gtm-ai': { name: 'GTM & Sales AI', emoji: 'ðŸ“ˆ' },
    'fintech-legal': { name: 'Fintech & Legal', emoji: 'âš–ï¸' },
    'healthtech': { name: 'Healthcare AI', emoji: 'ðŸ¥' },
    'industrial-ai': { name: 'Industrial AI', emoji: 'ðŸ­' },
    'consumer-ai': { name: 'Consumer AI', emoji: 'ðŸŽ¨' }
};

function isUnicorn(company) {
    return company.fundingValue >= 1000000000;
}

function isMaTarget(company) {
    const insight = (company.maInsight || '').toLowerCase();
    return insight.includes('target') || insight.includes('acqui') || insight.includes('potential');
}

function getBubbleSize(company, sizeBy) {
    let value;
    switch(sizeBy) {
        case 'employees':
            value = parseInt(company.employees?.replace(/[^0-9]/g, '') || 0);
            return Math.max(30, Math.min(80, 20 + Math.sqrt(value) * 1.5));
        case 'rating':
            return 30 + company.rating * 10;
        default: // funding
            value = company.fundingValue;
            if (value >= 1000000000) return 80;
            if (value >= 500000000) return 65;
            if (value >= 100000000) return 50;
            if (value >= 50000000) return 40;
            return 32;
    }
}

function filterCompanies() {
    const filter = document.getElementById('filterBy').value;
    const minFunding = parseInt(document.getElementById('minFunding').value);

    return companies.filter(c => {
        if (c.fundingValue < minFunding) return false;

        switch(filter) {
            case 'unicorn':
                return isUnicorn(c);
            case 'ma-target':
                return isMaTarget(c);
            case 'sf':
                return c.hq?.toLowerCase().includes('san francisco') ||
                       c.hq?.toLowerCase().includes('palo alto') ||
                       c.hq?.toLowerCase().includes('mountain view');
            case 'boston':
                return c.hq?.toLowerCase().includes('boston') ||
                       c.hq?.toLowerCase().includes('cambridge');
            case 'nyc':
                return c.hq?.toLowerCase().includes('new york');
            default:
                return true;
        }
    });
}

function renderMap() {
    const sizeBy = document.getElementById('sizeBy').value;
    const filtered = filterCompanies();

    // Group by category
    const byCategory = {};
    filtered.forEach(c => {
        if (!byCategory[c.category]) byCategory[c.category] = [];
        byCategory[c.category].push(c);
    });

    // Update stats
    const totalFunding = filtered.reduce((sum, c) => sum + c.fundingValue, 0);
    document.getElementById('totalCompanies').textContent = filtered.length;
    document.getElementById('totalFunding').textContent = `$${(totalFunding / 1000000000).toFixed(1)}B`;
    document.getElementById('unicornCount').textContent = filtered.filter(isUnicorn).length;
    document.getElementById('categoryCount').textContent = Object.keys(byCategory).length;

    // Render categories
    const grid = document.getElementById('categoryGrid');
    grid.innerHTML = Object.keys(categoryNames).map(cat => {
        const catCompanies = byCategory[cat] || [];
        if (catCompanies.length === 0) return '';

        const catFunding = catCompanies.reduce((sum, c) => sum + c.fundingValue, 0);
        const info = categoryNames[cat];

        return `
            <div class="category-box">
                <div class="category-header">
                    <div class="category-title">${info.emoji} ${info.name}</div>
                    <div class="category-stats">
                        <div class="category-count">${catCompanies.length}</div>
                        <div class="category-funding">$${(catFunding / 1000000000).toFixed(1)}B</div>
                    </div>
                </div>
                <div class="bubble-container">
                    ${catCompanies.sort((a, b) => b.fundingValue - a.fundingValue).map(c => {
                        const size = getBubbleSize(c, sizeBy);
                        const unicornClass = isUnicorn(c) ? 'unicorn' : '';
                        const maClass = isMaTarget(c) ? 'ma-target' : '';
                        return `
                            <div class="bubble ${c.category} ${unicornClass} ${maClass}"
                                 style="width: ${size}px; height: ${size}px;"
                                 data-id="${c.id}"
                                 onmouseenter="showTooltip(event, ${c.id})"
                                 onmouseleave="hideTooltip()"
                                 onclick="openModal(${c.id})">
                                ${size > 45 ? c.name.split(' ')[0] : ''}
                            </div>
                        `;
                    }).join('')}
                </div>
            </div>
        `;
    }).join('');
}

function showTooltip(event, id) {
    const company = companies.find(c => c.id === id);
    if (!company) return;

    const tooltip = document.getElementById('tooltip');
    tooltip.innerHTML = `
        <div class="tooltip-name">${company.name}</div>
        <div class="tooltip-product">${company.product}</div>
        <div class="tooltip-row">
            <span class="tooltip-label">Funding</span>
            <span class="tooltip-value">${company.funding}</span>
        </div>
        <div class="tooltip-row">
            <span class="tooltip-label">Employees</span>
            <span class="tooltip-value">${company.employees}</span>
        </div>
        <div class="tooltip-row">
            <span class="tooltip-label">HQ</span>
            <span class="tooltip-value">${company.hq}</span>
        </div>
        <div class="tooltip-tags">
            ${isUnicorn(company) ? '<span class="tooltip-tag unicorn">Unicorn</span>' : ''}
            ${isMaTarget(company) ? '<span class="tooltip-tag ma">M&A Target</span>' : ''}
        </div>
    `;

    const rect = event.target.getBoundingClientRect();
    tooltip.style.left = `${rect.left + rect.width / 2}px`;
    tooltip.style.top = `${rect.top - 10}px`;
    tooltip.style.transform = 'translate(-50%, -100%)';
    tooltip.classList.add('active');
}

function hideTooltip() {
    document.getElementById('tooltip').classList.remove('active');
}

function openModal(id) {
    const company = companies.find(c => c.id === id);
    if (!company) return;

    document.getElementById('modalContent').innerHTML = `
        <div class="modal-title">${company.name}</div>
        <div class="modal-subtitle">${company.product}</div>

        <div class="modal-grid">
            <div class="modal-stat">
                <div class="modal-stat-label">Funding</div>
                <div class="modal-stat-value">${company.funding}</div>
            </div>
            <div class="modal-stat">
                <div class="modal-stat-label">Founded</div>
                <div class="modal-stat-value">${company.founded}</div>
            </div>
            <div class="modal-stat">
                <div class="modal-stat-label">Employees</div>
                <div class="modal-stat-value">${company.employees}</div>
            </div>
            <div class="modal-stat">
                <div class="modal-stat-label">CEO</div>
                <div class="modal-stat-value">${company.ceo}</div>
            </div>
        </div>

        <div class="modal-section">
            <div class="modal-section-title">Headquarters</div>
            <div class="modal-section-text">${company.hq}</div>
        </div>

        <div class="modal-section">
            <div class="modal-section-title">Secret Sauce</div>
            <div class="modal-section-text">${company.secretSauce}</div>
        </div>

        <div class="modal-section">
            <div class="modal-section-title">M&A Intelligence</div>
            <div class="modal-section-text">${company.maInsight}</div>
        </div>

        <div class="modal-actions">
            <button class="modal-btn secondary" onclick="closeModal()">Close</button>
            <a href="compare.html" class="modal-btn primary" style="text-decoration: none; text-align: center;">Compare</a>
        </div>
    `;

    document.getElementById('companyModal').classList.add('active');
}

function closeModal() {
    document.getElementById('companyModal').classList.remove('active');
}

// Close modal on outside click
document.getElementById('companyModal').onclick = (e) => {
    if (e.target.id === 'companyModal') closeModal();
};

// Close modal on Escape
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeModal();
});

// Event listeners
document.getElementById('sizeBy').addEventListener('change', renderMap);
document.getElementById('filterBy').addEventListener('change', renderMap);
document.getElementById('minFunding').addEventListener('change', renderMap);

// Initialize
renderMap();
</script>
</body>
</html>
